API v3 Resources
=====================

Alerts
------
Alerts are received and processed before being added to database.

+-----------------------------+--------------------------------------------------------------+
| Resource                    | Description                                                  |
+=============================+==============================================================+
| :ref:`get-alerts`           | Get list of all alerts that meet the query filter.           |
+-----------------------------+--------------------------------------------------------------+
| :ref:`get-alert-id`         | Get alert details for a specific alert.                      |
+-----------------------------+--------------------------------------------------------------+
| :ref:`post-alert`           | Create a new alert.                                          |
+-----------------------------+--------------------------------------------------------------+
| :ref:`post-alert-id-status` | Change the status of an alert.                               |
+-----------------------------+--------------------------------------------------------------+
| :ref:`post-alert-id-tag`    | Tag an alert.                                                |
+-----------------------------+--------------------------------------------------------------+
| :ref:`post-alert-id-untag`  | Remove a tag from an alert.                                  |
+-----------------------------+--------------------------------------------------------------+
| :ref:`delete-alert-id`      | Delete an alert.                                             |
+-----------------------------+--------------------------------------------------------------+
| :ref:`get-alerts-history`   | Get history of actions on an alert.                          |
+-----------------------------+--------------------------------------------------------------+
| :ref:`get-alerts-count`     | Get aggregate counts of status and severity of alerts.       |
+-----------------------------+--------------------------------------------------------------+
| :ref:`get-alerts-top10`     | Get list of top 10 alerts grouped by environment and service.|
+-----------------------------+--------------------------------------------------------------+

Environments & Services
-----------------------

+-----------------------------+--------------------------------------------------------------+
| Resource                    | Description                                                  |
+=============================+==============================================================+
| :ref:`get-environments`     | Returns list of environments and all services for each.      |
+-----------------------------+--------------------------------------------------------------+
| :ref:`get-services`         | Returns list of all services and count of alerts for each.   |
+-----------------------------+--------------------------------------------------------------+

Heartbeats
----------

Heartbeats are sent from something at regular intervals to ensure that it is operating.

+-----------------------------+--------------------------------------------------------------+
| Resource                    | Description                                                  |
+=============================+==============================================================+
| :ref:`get-heartbeats`       | Get list of all heartbeats.                                  |
+-----------------------------+--------------------------------------------------------------+
| :ref:`post-heartbeat`       | Create a new heartbeat.                                      |
+-----------------------------+--------------------------------------------------------------+
| :ref:`delete-heartbeat-id`  | Delete a heartbeat.                                          |
+-----------------------------+--------------------------------------------------------------+

Users
-----

User emails that don't match the allowed domains can be individually white-listed.

+-----------------------------+--------------------------------------------------------------+
| Resource                    | Description                                                  |
+=============================+==============================================================+
| :ref:`get-users`            | Get list of all white-listed user email addresses.           |
+-----------------------------+--------------------------------------------------------------+
| :ref:`post-user`            | Add user email address to white-list.                        |
+-----------------------------+--------------------------------------------------------------+
| :ref:`delete-user-id`       | Delete email address from white-list.                        |
+-----------------------------+--------------------------------------------------------------+

API Keys
--------

API keys are used for programatic access to the API and are associated with an authorized user.

+-----------------------------+--------------------------------------------------------------+
| Resource                    | Description                                                  |
+=============================+==============================================================+
| :ref:`get-keys`             | Get list of all API keys.                                    |
+-----------------------------+--------------------------------------------------------------+
| :ref:`get-keys-user`        | Get list of API keys for a user.                             |
+-----------------------------+--------------------------------------------------------------+
| :ref:`post-key`             | Create a new API key.                                        |
+-----------------------------+--------------------------------------------------------------+
| :ref:`delete-key-id`        | Delete an API key.                                           |
+-----------------------------+--------------------------------------------------------------+

HTTP Status Codes
-----------------

+------------------+---------------------------------------------------------------------+
| Code             | Description                                                         |
+==================+=====================================================================+
| 200 OK           | No error.                                                           |
+------------------+---------------------------------------------------------------------+
| 201 Created      | Resource created successfully.                                      |
+------------------+---------------------------------------------------------------------+
| 400 Bad Request  | Mandatory parameter or data missing.                                |
+------------------+---------------------------------------------------------------------+
| 401 Unauthorized | Authorization required.                                             |
+------------------+---------------------------------------------------------------------+
| 403 Forbidden    | Pre-receive hook rejected request or authorization failed.          |
+------------------+---------------------------------------------------------------------+
| 404 Not Found    | Resource (such as alert or heartbeat) not found.                    |
+------------------+---------------------------------------------------------------------+
| 500 Server Error | Internal error. Default code used for all unexpected server errors. |
+------------------+---------------------------------------------------------------------+

Web Hooks
---------

Web hooks can be used to trigger updates to alerts from external services.

+-----------------------------+--------------------------------------------------------------+
| Resource                    | Description                                                  |
+=============================+==============================================================+
| :ref:`post-pagerduty`       | Change status of alert based on actions in pagerduty.        |
+-----------------------------+--------------------------------------------------------------+
