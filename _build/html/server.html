<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Server &amp; API &mdash; alerta 4.5 documentation</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '4.5',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="top" title="alerta 4.5 documentation" href="index.html" />
    <link rel="next" title="Alerta Web UI" href="webui.html" />
    <link rel="prev" title="Design Principles" href="design.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="server-api">
<span id="server"></span><h1>Server &amp; API<a class="headerlink" href="#server-api" title="Permalink to this headline">¶</a></h1>
<p>The Alerta API receives alerts from multiple sources, <a class="reference internal" href="#correlation"><span>correlates</span></a>, <a class="reference internal" href="#deduplication"><span>de-duplicates</span></a> or <a class="reference internal" href="#blackouts"><span>suppresses</span></a> them, and makes the alerts available via a <a class="reference external" href="http://apigee.com/about/resources/webcasts/restful-api-design-second-edition">RESTful</a> <a class="reference external" href="http://developers.squarespace.com/what-is-json/">JSON</a> API.</p>
<p>Alerts can be intercepted as they are received to modify, enhance or reject them using <span class="xref std std-ref">pre-receive hooks</span>. Alerts can also be used to trigger actions in other systems after the alert has been processed using <span class="xref std std-ref">post-receive hooks</span>.</p>
<p>There are several <a class="reference internal" href="integrations.html#integrations"><span>integrations</span></a> with popular monitoring tools available and <a class="reference internal" href="integrations.html#webhooks"><span>webhooks</span></a> can be used to trivially integrate with AWS Cloudwatch, Pingdom, and PagerDuty.</p>
<div class="section" id="event-processing">
<span id="id1"></span><h2>Event Processing<a class="headerlink" href="#event-processing" title="Permalink to this headline">¶</a></h2>
<p>Alerta comes <cite>out-of-the-box</cite> with key features designed to reduce the burden of alert management. When an event is received it it is processed in the following manner:</p>
<ol class="arabic simple">
<li>all plugins pre-receive hooks are run in alphabetical order, alert immediately rejected if any return a Reject Exception</li>
<li>alert is checked against any active blackout periods, alert suppressed if any match</li>
<li>alert is checked if duplicate, if so duplicate count ++, repeat=True</li>
<li>alert is checked if correlated, if so change severity and/or status etc</li>
<li>alert is added as new</li>
<li>all plugin post-receive hooks are run in alphabetical order</li>
<li>new or updated alert returned in reponse</li>
<li>timeout used to expire alerts from the console</li>
</ol>
</div>
<div class="section" id="plug-ins">
<h2>Plug-ins<a class="headerlink" href="#plug-ins" title="Permalink to this headline">¶</a></h2>
<p>Plug-ins are small python scripts that can run either before or after an alert is saved to the database. This is achieved by registering <em>pre-receive hooks</em> for transformers and <em>post-receive hooks</em> for downstream integration.</p>
<div class="section" id="transformers">
<span id="id2"></span><h3>Transformers<a class="headerlink" href="#transformers" title="Permalink to this headline">¶</a></h3>
<p>Using pre-receive hooks, plugins provide the ability to transform raw alert data from sources before alerts are created. For example, alerts can be <em>normalised</em> to ensure they all have specific attributes or tags or only have a specific value from a range of allowed values. This is demonstrated in the <a class="reference external" href="https://github.com/guardian/alerta/blob/master/alerta/plugins/reject.py">reject plugin</a> that enforces an alert policy.</p>
<p>Plugins can also be used to <em>enhance</em> alerts  &#8211; like the <a class="reference external" href="https://github.com/alerta/alerta-contrib/blob/master/plugins/geoip/geoip.py">Geo location plugin</a> which adds location data to alerts based on the sending IP address, or this generic <a class="reference external" href="https://github.com/guardian/alerta/blob/master/alerta/plugins/enhance.py">enhance plugin</a> which adds a <code class="docutils literal"><span class="pre">customer</span></code> attribute based on information contained in the alert.</p>
</div>
<div class="section" id="integrations">
<h3>Integrations<a class="headerlink" href="#integrations" title="Permalink to this headline">¶</a></h3>
<p>Using post-receive hooks, plugin integrations can be used to provide downstream systems with alerts in realtime. For example, pushing alerts onto an AWS SNS topic, AMQP queue, logging to a Logstash/Kibana stack, or sending notifications to HipChat, Slack or Twilio.</p>
</div>
</div>
<div class="section" id="blackout-periods">
<span id="blackouts"></span><h2>Blackout Periods<a class="headerlink" href="#blackout-periods" title="Permalink to this headline">¶</a></h2>
<p>An alert that is received during a blackout period is suppressed. That is, it is received by Alerta and a <code class="docutils literal"><span class="pre">202</span> <span class="pre">Accepted</span></code> status code is returned however this means that eventhough the alert has been accepted, it won&#8217;t be processed.</p>
<p>Alerta defines many different alert attributes that can be used to group alerts and it is these attributes that can be used to define rules eg. environment, service and group. However, it is possible to define blackout rules based on resource and event attributes for situations that require that level of granularity.</p>
<p>Tags can also be used to define a blackout rule which should allow a lot of flexibility &#8211; one or more tags can be required to match an alert for the suppression to apply &#8211; because tags can be added at source, using the alerta CLI, or using a plug-in.</p>
<p>In summary, blackout rules can be any of:</p>
<ul class="simple">
<li>an entire environment eg. <code class="docutils literal"><span class="pre">environment=Production</span></code></li>
<li>a particular resource eg. <code class="docutils literal"><span class="pre">resource=host55</span></code></li>
<li>an entire service eg. <code class="docutils literal"><span class="pre">service=Web</span></code></li>
<li>every occurrence of a specific event eg. <code class="docutils literal"><span class="pre">event=DiskFull</span></code></li>
<li>a group of events eg. <code class="docutils literal"><span class="pre">group=Syslog</span></code></li>
<li>a specific event for a resource eg. <code class="docutils literal"><span class="pre">resource=host55</span> <span class="pre">and</span> <span class="pre">event=DiskFull</span></code></li>
<li>all events that have a specific set of tags eg. <code class="docutils literal"><span class="pre">tags=[</span> <span class="pre">blackout,</span> <span class="pre">london</span> <span class="pre">]</span></code></li>
</ul>
<p>Note that an <code class="docutils literal"><span class="pre">environment</span></code> is always required to be defined for a blackout rule.</p>
</div>
<div class="section" id="de-duplication">
<span id="deduplication"></span><h2>De-Duplication<a class="headerlink" href="#de-duplication" title="Permalink to this headline">¶</a></h2>
<p>When an alert with the same <code class="docutils literal"><span class="pre">event</span></code>-<code class="docutils literal"><span class="pre">resource</span></code> is received with the <strong>same</strong> <code class="docutils literal"><span class="pre">severity</span></code>, the alert is de-duplicated.</p>
<p>This means that information from the de-duplicated alert is used to update key attributes of the existing alert (like <code class="docutils literal"><span class="pre">value</span></code>, <code class="docutils literal"><span class="pre">text</span></code> and <code class="docutils literal"><span class="pre">lastReceiveTime</span></code>) and the new alert is not shown.</p>
<p><strong>Example of De-duplication</strong></p>
<p><em>INSERT EXAMPLE HERE</em></p>
</div>
<div class="section" id="simple-correlation">
<span id="correlation"></span><h2>Simple Correlation<a class="headerlink" href="#simple-correlation" title="Permalink to this headline">¶</a></h2>
<p>There are two ways alerts can be correlated.</p>
<p>Firstly, when an alert with the same <code class="docutils literal"><span class="pre">event</span></code>-<code class="docutils literal"><span class="pre">resource</span></code> is received with a <strong>different</strong> <code class="docutils literal"><span class="pre">severity</span></code>, the alert is correlated.</p>
<p><strong>Example of Correlation (same event)</strong></p>
<p><em>INSERT EXAMPLE HERE</em></p>
<p>Secondly, when a alert with the same <code class="docutils literal"><span class="pre">resource</span></code> is received with an <code class="docutils literal"><span class="pre">event</span></code> in the <code class="docutils literal"><span class="pre">correlate</span></code> list of related events with <strong>any</strong> severity, the alert is correlated.</p>
<p><strong>Example of Correlation (related event)</strong></p>
<p><em>INSERT EXAMPLE HERE</em></p>
<p>In both cases, this means that information from the correlated alert is used to update key attributes of the existing alert (like <code class="docutils literal"><span class="pre">event</span></code>, <code class="docutils literal"><span class="pre">value</span></code>, <code class="docutils literal"><span class="pre">text</span></code> and <code class="docutils literal"><span class="pre">lastReceiveTime</span></code>) and the new alert is not shown.</p>
</div>
<div class="section" id="state-based-browser">
<h2>State-based Browser<a class="headerlink" href="#state-based-browser" title="Permalink to this headline">¶</a></h2>
<p>Alerts cleared, normal, ok change status to <cite>closed</cite>
auto status change (open-&gt;closed-&gt;open)
previousSeverity &amp; trendIndication
status / severity change &amp; history log
duplicate count, repeat flag
timeout stale alerts</p>
</div>
<div class="section" id="heartbeats">
<h2>Heartbeats<a class="headerlink" href="#heartbeats" title="Permalink to this headline">¶</a></h2>
<p>alerting on stale heartbeats</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">alerta</a></h1>



<p class="blurb">monitoring system</p>



<p>
<iframe src="https://ghbtns.com/github-btn.html?user=guardian&repo=alerta&type=watch&count=true&size=large"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>




    

<p>
<a href="https://travis-ci.org/guardian/alerta">
    <img
        alt="https://secure.travis-ci.org/guardian/alerta.png?branch=master"
        src="https://secure.travis-ci.org/guardian/alerta.png?branch=master"
    >
</a>
</p>


<h3>
Links
</h3>
<ul>
  <li>
    <a href="http://alerta.io" rel="me">Web</a>
  </li>
  <li>
    <a href="https://twitter.com/alertaio" rel="me">Twitter</a>
  </li>
  <li>
    <a href="https://gitter.im/alerta/chat" rel="me">Gitter</a>
  </li>
</ul>

<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="quick-start.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="design.html">Design Principles</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="">Server &amp; API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#event-processing">Event Processing</a></li>
<li class="toctree-l2"><a class="reference internal" href="#plug-ins">Plug-ins</a></li>
<li class="toctree-l2"><a class="reference internal" href="#blackout-periods">Blackout Periods</a></li>
<li class="toctree-l2"><a class="reference internal" href="#de-duplication">De-Duplication</a></li>
<li class="toctree-l2"><a class="reference internal" href="#simple-correlation">Simple Correlation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#state-based-browser">State-based Browser</a></li>
<li class="toctree-l2"><a class="reference internal" href="#heartbeats">Heartbeats</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="webui.html">Alerta Web UI</a></li>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Alerta CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="integrations.html">Integrations &amp; Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="authentication.html">Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="configuration.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="conventions.html">Conventions</a></li>
<li class="toctree-l1"><a class="reference internal" href="development.html">Development</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="api/reference.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/alert.html">Alert Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="api/heartbeat.html">Heartbeat Format</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Releases</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">About</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Nick Satterly.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.6</a>
      
      |
      <a href="_sources/server.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-44644195-3']);
      _gaq.push(['_setDomainName', 'none']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
    
  </body>
</html>